{{ if .Site.Params.options.mermaid -}}
  <div class="mermaid{{ with .Get "class" }} {{ . }}{{ end }}">
    {{ $data := replaceRE "(^\\s+```)" "" .Inner -}}
    {{ replaceRE "(```\\s+$)" "" $data -}}
  </div>
{{ else -}}
  {{ errorf "Failed to process mermaid shortcode(s). Set `mermaid = true` in `./config/_default/params.toml`." }}
{{ end -}}
